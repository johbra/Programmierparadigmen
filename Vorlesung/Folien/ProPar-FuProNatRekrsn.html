<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<title>Funktionale Programmierung &#x2013; Natürliche Rekursion</title>
<meta name="author" content="(Johannes Brauer)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="./mycss/myrevealstyle.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" type="text/css" href="mycss/mystyle.css" />
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Funktionale Programmierung &#x2013; Natürliche Rekursion</h1><h2 class="author">Johannes Brauer</h2><p class="date">Created: 2017-10-10 Tue 21:31</p>
</section>


<section>
<section id="slide-orgbb3621a">
<h2 id="orgbb3621a">Symbolische Ausdrücke</h2>
<div class="outline-text-2" id="text-orgbb3621a">
</div></section>
<section id="slide-org2f9829f">
<h3 id="org2f9829f">Symbole</h3>
<ul>
<li><i>Symbole</i> sind eine einfache Möglichkeit für die Repräsentation
nicht-numerischer Daten.</li>
<li>Symbole sind aufgebaut wie Variablennamen; damit sie nicht als solche
interpretiert werden, ist ein Hochkomma voranzustellen.</li>
<li>Beispiele:<br />
'<code>symbol 'KarlMarx 'Dies-ist-auch-ein-Symbol 'x1</code></li>
<li>Symbole dürfen Buchstaben, Ziffern und ein paar Sonderzeichen (keine
Leerzeichen!) enthalten.</li>
<li>Symbole sind &#x2013; wie Zahlen &#x2013; atomare Daten.</li>
<li>Symbole werden &#x2013; wie Zahlen &#x2013; zu sich selbst ausgewertet.</li>
<li>Einzige Operation auf symbolischen Atomen ist die Prüfung auf
Gleichheit: <code>=</code> erwartet zwei Symbole als Argumente und liefert
<code>true</code> dann und nur dann, wenn sie identisch sind:</li>

</ul>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span>= '<span style="color: #6434A3;">Hallo</span> '<span style="color: #6434A3;">Hallo</span><span style="color: #707183;">)</span> ==&gt; <span style="color: #D0372D;">true</span> 
       <span style="color: #707183;">(</span>= '<span style="color: #6434A3;">Karl</span> '<span style="color: #6434A3;">Rosa</span><span style="color: #707183;">)</span>   ==&gt; <span style="color: #D0372D;">false</span>
       <span style="color: #707183;">(</span>= '<span style="color: #6434A3;">Hallo</span> hallo<span style="color: #707183;">)</span>  ==&gt; <span style="color: #D0372D;">true</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">(wenn hallo f&#252;r &#8217;Hallo steht)</span></pre>
</pre>
</div>


</section>
<section id="slide-orgbc90a2a">
<h3 id="orgbc90a2a">S-Ausdrücke</h3>
<ul>
<li><i>Symbolische Ausdrücke</i> (kurz: S-Ausdrücke) wurden erfunden von
McCarthy für LISP.</li>

<li><b>Definition:</b> (vorläufig)<br />
Ein S-Ausdruck ist

<ul>
<li>ein Atom, z.B. <code>27</code>, <code>’Karl</code>, <code>’ist</code></li>

<li>eine Folge von S-Ausdrücken, eingeschlossen in (), z.B.<br />
<code>’(Karl ist 27)</code>,<br />
<code>’((Dies ist) (eine Liste) (mit 3 Elementen))</code><br />
Solche S-Ausdrücke heißen <i>Listen</i>.
(Man beachte die Rekursivität dieser Definition!)</li>

</ul></li>

<li>Atome sind entweder numerisch, boolesch oder symbolisch.</li>

</ul>

</section>
<section id="slide-org27fb0b8">
<h3 id="org27fb0b8">Darstellung von Formeln als S-Ausdrücke</h3>
<ul>
<li><p>
Bestandteile einer Formel: Konstanten, Variablen und duale Operatoren
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Formel</b></th>
<th scope="col" class="org-left"><b>S-Ausdruck</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Konstante</td>
<td class="org-left">numerisches Atom</td>
</tr>

<tr>
<td class="org-left">Variable</td>
<td class="org-left">symbolisches Atom</td>
</tr>

<tr>
<td class="org-left">Operator</td>
<td class="org-left">symbolisches Atom</td>
</tr>

<tr>
<td class="org-left">\(p+q\)</td>
<td class="org-left">(ADD \(p\) \(q\))</td>
</tr>

<tr>
<td class="org-left">\(p-q\)</td>
<td class="org-left">(SUB \(p\) \(q\))</td>
</tr>

<tr>
<td class="org-left">\(p\ast q\)</td>
<td class="org-left">(MUL \(p\) \(q\))</td>
</tr>

<tr>
<td class="org-left">\(p/q\)</td>
<td class="org-left">(DIV \(p\) \(q\))</td>
</tr>

<tr>
<td class="org-left">\(p^q\)</td>
<td class="org-left">(EXP \(p\) \(q\))</td>
</tr>
</tbody>
</table>
<p>
\(p\) und \(q\) stehen für Teile einer Formel
</p></li>

</ul>
</section>
<section id="slide-orga9d27ff">
<h4 id="orga9d27ff">Beispiel-Formel</h4>
<ul>
<li>Die Formel \(x^2+3y-5\) wird durch den S-Ausdruck<br />
<code>’(ADD (EXP x 2) (SUB (MUL 3 y ) 5))</code><br />
dargestellt.</li>

</ul>

</section>
<section id="slide-org73eb199">
<h3 id="org73eb199">Konstruktion von Listen</h3>
<ul>
<li>Ausgangspunkt für die Konstruktion einer Liste ist die leere Liste,
die durch<br />
<code>’()</code><br />
repräsentiert wird. (Clojure akzeptiert fast überall auch <code>()</code>.)</li>
<li>Mit der Funktion <code>cons</code> kann ein Element als neues erstes Element
einer Liste hinzugefügt werden.<br /></li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">   <span style="color: #707183;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Karl</span> <span style="color: #7388D6;">()</span> <span style="color: #707183;">)</span>                            ==&gt; <span style="color: #707183;">(</span><span style="color: #6434A3;">Karl</span><span style="color: #707183;">)</span>
   <span style="color: #707183;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Rosa</span> <span style="color: #7388D6;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Karl</span> <span style="color: #909183;">()</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>               ==&gt; <span style="color: #707183;">(</span><span style="color: #6434A3;">Rosa</span> <span style="color: #6434A3;">Karl</span><span style="color: #707183;">)</span>
   <span style="color: #707183;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Klara</span> <span style="color: #7388D6;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Rosa</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">cons</span> &#8217;<span style="color: #6434A3;">Karl</span> <span style="color: #709870;">()</span> <span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span> ==&gt; <span style="color: #707183;">(</span><span style="color: #6434A3;">Klara</span> <span style="color: #6434A3;">Rosa</span> <span style="color: #6434A3;">Karl</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div>
<ul>
<li>Die Standardfunktion <code>cons</code> erwartet zwei Argumente:
<ul>
<li>ein neues erstes Element und</li>
<li>eine Liste</li>

</ul></li>

</ul>
</section>
<section >
<ul>
<li>Jede Liste kann man sich aus zwei Teilen bestehend vorstellen:
<ul>
<li>das erste Element und</li>
<li>die Restliste.</li>

</ul></li>
<li>Die drei obigen Listen können dann so veranschaulicht werden:</li>

</ul>

<div class="figure">
<p><img src="./Abbildungen/Listen.png" alt="Listen.png" width="150px" />
</p>
</div>

<div class="figure">
<p><img src="./Abbildungen/Listen2.png" alt="Listen2.png" width="220px" />
</p>
</div>

<div class="figure">
<p><img src="./Abbildungen/Listen3.png" alt="Listen3.png" width="250px" />
</p>
</div>
<ul>
<li>eine andere gebräuchliche Darstellung für Listen:</li>

</ul>

<div class="figure">
<p><img src="./Abbildungen/Listen4.png" alt="Listen4.png" width="350px" />
</p>
</div>

</section>
<section id="slide-org0243dc3">
<h3 id="org0243dc3">Zerlegung von Listen</h3>
<ul>
<li>Clojure stellt zwei Funktionen bereit zum Zugriff auf die beiden
Komponenten einer Liste:
<ul>
<li><code>first</code> liefert &#x2013; angewendet auf eine nicht leere Liste &#x2013; das
erste Element.</li>
<li><code>rest</code> liefert &#x2013; angewendet auf eine nicht leere Liste &#x2013; die
Restliste.</li>

</ul></li>
<li><p>
Der Zusammenhang zwischen <code>cons</code>, <code>first</code> und <code>rest</code> kann durch die
folgenden Gleichungen beschrieben werden:
</p>

<p>
\[(first (cons\ elem\ liste))  = elem\\
   (rest (cons\ elem\ liste))  =  liste\]
</p></li>

<li><p>
Beispiele:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #006FE0;">first</span> <span style="color: #7388D6;">(</span><span style="color: #006FE0;">cons</span> 1 <span style="color: #909183;">(</span><span style="color: #006FE0;">cons</span> 2 <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> 3 <span style="color: #907373;">()</span> <span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span> ==&gt; 1
       <span style="color: #707183;">(</span><span style="color: #006FE0;">first</span> <span style="color: #7388D6;">(</span><span style="color: #006FE0;">rest</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">cons</span> 1 <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> 2 <span style="color: #907373;">(</span><span style="color: #006FE0;">cons</span> 3 <span style="color: #6276BA;">()</span> <span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span> ==&gt; 2
       <span style="color: #707183;">(</span><span style="color: #006FE0;">first</span> <span style="color: #7388D6;">()</span> <span style="color: #707183;">)</span> ==&gt; <span style="color: #D0372D;">nil</span>
       <span style="color: #707183;">(</span><span style="color: #006FE0;">rest</span> <span style="color: #7388D6;">()</span> <span style="color: #707183;">)</span>  ==&gt; <span style="color: #707183;">()</span></pre>
</pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgdb20575">
<h2 id="orgdb20575">Funktionen für die Verarbeitung rekursiv definierter Datenstrukturen</h2>
<div class="outline-text-2" id="text-orgdb20575">
</div></section>
<section id="slide-org6d52554">
<h3 id="org6d52554">Rekursive Datenstrukturen</h3>
<ul>
<li>Für einen Gebrauchtwagenhändler repräsentieren wir die Menge der im
Angebot befindlichen Automarken in einer Liste von Symbolen, z.B. so:<br />
<code>(’VW ’Opel ’Toyota)</code></li>
<li>Listen können beliebig lang werden (vgl. Definition des S-Ausdrucks).
Eine <i>Liste-von-Symbolen (lvs)</i> kann als Datenstruktur wie folgt
rekursiv definiert werden: Eine <i>Liste-von-Symbolen</i> ist entweder
<ol>
<li>die leere Liste: <code>()</code> oder</li>
<li><code>(cons s lvs)</code>, wobei <code>s</code> ein Symbol und <code>lvs</code> eine
<i>Liste-von-Symbolen</i> ist</li>

</ol></li>
<li>Bei der Verarbeitung von Listen müssen in der Regel diese beiden
Alternativen getrennt behandelt werden. Das bedeutet, dass eine
Fallunterscheidung erforderlich ist.</li>
<li>Die leere Liste <code>()</code> kann mit dem Prädikat <code>empty?</code> erkannt werden.</li>

</ul>

</section>
<section id="slide-org90779b0">
<h3 id="org90779b0">Verarbeitung beliebig langer Listen <i>(1)</i></h3>
<ul>
<li>Es soll geprüft werden können, ob in der Liste mit den Automarken
<code>’BMW</code> vorkommt.</li>
<li><p>
Gemäß Entwurfsvorschrift I schreiben wir Vertrag, Zweckbestimmung und
Funktionskopf auf:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">ermittelt, ob das Symbol 'BMW in der </span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">liste-von-symbolen auftritt</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">enthaelt-bmw?</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
           <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
            <span style="color: #D0372D;">:post</span><span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #0000FF;">or</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">true?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">false?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
           ...<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org8ec9e6d">
<h3 id="org8ec9e6d">Verarbeitung beliebig langer Listen <i>(2)</i></h3>
<ul>
<li><p>
Anschließend formulieren wir drei Tests:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-enthaelt-bmw?</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">not</span> <span style="color: #709870;">(</span>enthaelt-bmw? <span style="color: #907373;">()</span> <span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> 
          <span style="color: #909183;">(</span><span style="color: #006FE0;">not</span> <span style="color: #709870;">(</span>enthaelt-bmw? 
                <span style="color: #907373;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #D0372D;">VW</span> 
                      <span style="color: #6276BA;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #6434A3;">Opel</span> 
                            <span style="color: #858580;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #6434A3;">Toyota</span> <span style="color: #80A880;">()</span> <span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span>
          <span style="color: #909183;">(</span>enthaelt-bmw? 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #D0372D;">VW</span> 
                 <span style="color: #907373;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #6434A3;">Opel</span> 
                    <span style="color: #6276BA;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #D0372D;">BMW</span>
                          <span style="color: #858580;">(</span><span style="color: #006FE0;">cons</span> '<span style="color: #6434A3;">Toyota</span> <span style="color: #80A880;">()</span> <span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-orgb409d03">
<h3 id="orgb409d03">Verarbeitung beliebig langer Listen <i>(3)</i></h3>
<ul>
<li>Nun definieren wir eine <i>Funktionsschablone</i> gemäß Entwurfsvorschrift
II (für bedingte Funktionen), die der Struktur der Datendefinition
<i>Liste-von-Symbolen</i> folgt.</li>
<li><p>
Da diese Definition zwei Fälle &#x2013; die leere und die nicht-leere Liste &#x2013;
unterscheidet, ergibt sich folgende Schablone:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">f</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
             <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
                   <span style="color: #D0372D;">:else</span>        ... <span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section >

<ul>
<li><p>
Eine nicht-leere Liste ist eine aus zwei Komponenten zusammengesetzte
Datenstruktur:
</p>
<ol>
<li>dem ersten Element und</li>
<li>der Restliste (ohne das erste Element).</li>

</ol>
<p>
Da für die Verarbeitung einer solchen Struktur in der Regel auf beide
Komponenten zugegriffen werden muss, ergänzen wir die Schablone nun
um die Aufrufe der Selektionsfunktionen für diese beiden Komponenten.
</p></li>

</ul>

</section>
<section id="slide-orgcbe54d9">
<h3 id="orgcbe54d9">Verarbeitung beliebig langer Listen <i>(4)</i></h3>
<ul>
<li>Aus diesen Überlegungen ergibt sich folgende Schablone:</li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">f</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
            <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
              <span style="color: #D0372D;">:else</span>  ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> 
                     ... <span style="color: #709870;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #709870;">)</span>  ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div>
<ul>
<li>Die Auslassungszeichen sind dann entsprechend der Zweckbestimmung
auszufüllen, d.h. die Lösung muss aus den Zugriffen auf das erste
Element und die Restliste geeignet kombiniert werden.</li>
<li>Kehren wir dazu zu unserem Beispiel zurück.</li>

</ul>

</section>
<section id="slide-org79a0c5e">
<h3 id="org79a0c5e">Verarbeitung beliebig langer Listen <i>(5)</i></h3>
<ul>
<li><p>
Die Schablone angewendet auf <code>enthaelt-bmw?</code>, wobei die Lösung für
den Fall der leeren Liste bereits eingetragen ist:
</p>

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">enthaelt-bmw?</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
            <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #D0372D;">false</span>
              <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> 
                    ... <span style="color: #709870;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org8668ebc">
<h3 id="org8668ebc">Verarbeitung beliebig langer Listen <i>(6)</i></h3>
<ul>
<li><p>
Nun betrachten wir die Komponenten der nicht-leeren Liste. Falls das
erste Element das gesuchte ist, muss die Funktion <code>true</code> liefern:
</p>

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">enthaelt-bmw?</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
            <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #D0372D;">false</span>
              <span style="color: #D0372D;">:else</span> 
                 <span style="color: #709870;">(</span><span style="color: #0000FF;">cond</span> <span style="color: #907373;">(</span>= <span style="color: #6276BA;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #6276BA;">)</span> '<span style="color: #D0372D;">BMW</span><span style="color: #907373;">)</span> <span style="color: #D0372D;">true</span>
                       <span style="color: #D0372D;">:else</span> ... <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #907373;">)</span> ...<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-orga59e54d">
<h3 id="orga59e54d">Verarbeitung beliebig langer Listen <i>(7)</i></h3>
<ul>
<li>Falls das gesuchte Symbol nicht das erste in der Liste ist, hängt das
Ergebnis der Funktion davon ab, ob es in der Restliste gefunden wird.
Da die Restliste ja selbst wieder eine <i>Liste-von-Symbolen</i> ist, ist
auf sie die Funktion <code>enthaelt-bmw?</code> anwendbar:</li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">enthaelt-bmw?</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
           <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
            <span style="color: #D0372D;">:post</span><span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #0000FF;">or</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">true?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">false?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
             <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #D0372D;">false</span>
                   <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span><span style="color: #0000FF;">cond</span> <span style="color: #907373;">(</span>= <span style="color: #6276BA;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #6276BA;">)</span> '<span style="color: #D0372D;">BMW</span><span style="color: #907373;">)</span> <span style="color: #D0372D;">true</span>
                               <span style="color: #D0372D;">:else</span> <span style="color: #907373;">(</span>enthaelt-bmw? <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div>
<ul>
<li>Damit ist die Funktion vollständig. (Zu finden unter enthaelt-bmw.clj
in <i>moodle</i>.)</li>

</ul>

</section>
</section>
<section>
<section id="slide-org24f4847">
<h2 id="org24f4847">Entwurfsvorschrift V</h2>
<div class="outline-text-2" id="text-org24f4847">
</div></section>
<section id="slide-org3bd4054">
<h3 id="org3bd4054">Entwurfsvorschrift V (Verarbeitung von Listen) <i>(1)</i></h3>
<ul>
<li>Die Funktion <code>enthaelt-bmw?</code> wurde unter Verwendung der
Entwurfsvorschriften I und II entwickelt.</li>
<li>Anpassung der Entwurfsvorschrift für die Entwicklung von Funktionen
zur Verarbeitung <i>rekursiver Datenstrukturen</i>:
<ul>
<li>Die Phase <i>Datenanalyse</i> wird ergänzt um die Aktivität zum Entwurf
der rekursiven Datenstruktur. Dies ist grundsätzlich dann nötig,
wenn Datenmengen beliebiger Größe zu verarbeiten sind.</li>

</ul></li>
<li>Die Definition einer rekursiven Datenstruktur erfolgt durch
Aufschreiben von mindestens zwei Sätzen, wobei mindestens einer einen
Rückbezug auf die Definition und mindestens einer keinen Rückbezug
auf die Definition aufweist.</li>

</ul>

</section>
<section id="slide-org78abe85">
<h3 id="org78abe85">Entwurfsvorschrift V <i>(2)</i></h3>
<ul>
<li>Betrachten wir dazu noch einmal die Definition der Liste von
Symbolen:</li>

</ul>

<div class="figure">
<p><img src="./Abbildungen/lvs.png" alt="lvs.png" width="600px" />
</p>
</div>
<ul>
<li>Der Pfeil verdeutlicht den Selbstbezug der Definition.</li>

</ul>

</section>
<section id="slide-org02faf1d">
<h3 id="org02faf1d">Entwurfsvorschrift V <i>(3)</i></h3>
<ul>
<li>In der Phase <i>Funktionsschablone</i> wird eine solche für
eine bedingte Funktion erstellt, die für jeden Satz der Definition
der rekursiven Datenstruktur eine Frage-Antwort-Kombination enthält.</li>
<li>Dabei könnte für jede Frage, die eine dem Parameter der Funktion
gleichartige Datenstruktur selektiert, ein Pfeil auf den
Funktionsnamen gezeichnet werden.</li>
<li>Man erhält dann eine Funktionsschablone, die zur rekursiven
Definition der Datenstruktur gewissermaßen isomorph ist:</li>

</ul>

<div class="figure">
<p><img src="./Abbildungen/listenfunktion.png" alt="listenfunktion.png" width="600px" />
</p>
</div>
</section>
<section id="slide-org90ad987">
<h3 id="org90ad987">Entwurfsvorschrift V &#x2013; Funktionsschablone</h3>
<ul>
<li>Dieser Rückwärtspfeil wird durch eine rekursive Anwendung der
Funktion ersetzt.</li>
<li>Damit ergibt sich für das Beispiel der Verarbeitung beliebig langer
Listen von Symbolen die folgende Funktionsschablone:</li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">           
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">listen-funktion</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
            <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
               <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
               <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> ... 
                     ... <span style="color: #709870;">(</span>listen-funktion <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #907373;">)</span><span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>                        </pre>
</pre>
</div>

</div>
<ul>
<li>Wir sprechen hier von <b>natürlicher Rekursion</b>.</li>

</ul>

</section>
<section id="slide-orgc33288f">
<h3 id="orgc33288f">Entwurfsvorschrift V &#x2013; Funktionsrumpf</h3>
<ul>
<li>Die Entwicklung des Funktionsrumpfs beginnt mit den
Frage-Antwort-Kombinationen, die keine rekursiven Aufrufe enthalten.
<ul>
<li>Die Antwort ist in der Regel einfach.</li>
<li>Sie sollte in den Beispielen bereits vorkommen.</li>

</ul></li>
<li>Für die rekursiven Fälle ist zunächst vorauszusetzen, dass die
rekursive Anwendung der Funktion auf die Restliste bereits das
gewünschte Ergebnis liefert.</li>
<li><p>
Dieses ist mit dem Ergebnis für das erste Element der Liste geeignet
(problemabhängig) zu kombinieren.
</p>

<p>
Dieser Schritt besteht in dem Beispiel <code>enthaelt-bmw?</code> in einer
weiteren Fallunterscheidung.
</p></li>

</ul>

</section>
</section>
<section>
<section id="slide-org357d82a">
<h2 id="org357d82a">Entwurfsvorschrift V &#x2013; Zusammenfassung</h2>
<div class="outline-text-2" id="text-org357d82a">
</div></section>
<section id="slide-org1b9c1df">
<h3 id="org1b9c1df">Entwurfsvorschrift V (Rekursive Datenstrukturen)</h3>
<p>
Die sechs Phasen der Entwurfsvorschrift II bleiben grundsätzlich bestehen.
</p>

<ol>
<li>Vertrag, Funktionskopf, Zweckbestimmung</li>
<li><b>Datenanalyse / Datendefinition</b></li>
<li><b>Beispiele / Tests</b></li>
<li><b>Funktionsschablone</b></li>
<li>Funktionsrumpf</li>
<li>Testen</li>

</ol>

<p>
Es folgt die Beschreibung der neuen bzw. angepassten Phasen.
</p>

</section>
<section id="slide-org66e24cf">
<h3 id="org66e24cf">Entwurfsvorschrift V - Phase 2</h3>
<p>
<b>Datenanalyse / Datendefinition</b>
</p>
<ul>
<li>Ziel: Definition von problemangepassten Datenstrukturen</li>
<li>Aktivitäten:
<ul>
<li>Analysiere die Problembeschreibung hinsichtlich der zu
verarbeitenden Objekte. Definiere für jede Objektmenge eine
(rekursive) Datenstruktur!</li>

</ul></li>

</ul>

</section>
<section id="slide-org3b1d49a">
<h3 id="org3b1d49a">Entwurfsvorschrift V - Phase 3</h3>
<p>
<b>Beispiele / Tests</b>
</p>
<ul>
<li>Ziel: Untersuche die Problembeschreibung nach Beispielen</li>
<li>Aktivitäten:
<ul>
<li><p>
Formuliere mindestens einen Test für den Fall, dass die rekursive
Datenstruktur
</p>
<ul>
<li>keine Elemente,</li>
<li>genau ein Element oder</li>
<li>mehr als ein Element</li>

</ul>
<p>
enthält!
</p></li>

</ul></li>

</ul>

</section>
<section id="slide-org818bd4e">
<h3 id="org818bd4e">Entwurfsvorschrift V - Phase 4</h3>
<p>
<b>Funktionsschablone</b>
</p>
<ul>
<li>Ziel: Entwurf einer Funktionsschablone, die der rekursiven Struktur
der Daten folgt.</li>
<li>Aktivitäten:
<ul>
<li>Schreibe das Skelett eines <code>cond</code>-Ausdrucks auf mit je einer
Frage-Antwort-Klausel für jeden nicht-rekursiven und jeden
rekursiven Fall!</li>
<li>Notiere dabei für die rekursiven Fälle die passenden
Selektionsausdrücke <code>(first ...), (rest ...)</code>, <b>wobei auf den</b>
<b>Ausdruck <code>(rest ...)</code> die zu entwickelnde Funktion rekursiv
anzuwenden ist</b>.</li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org15c6f23">
<h2 id="org15c6f23">Listen als Resultate</h2>
<div class="outline-text-2" id="text-org15c6f23">
</div></section>
<section id="slide-orgb14d95b">
<h3 id="orgb14d95b">Anwendung von Entwurfsvorschrift V</h3>
<ul>
<li>Dem Gebrauchtwagenhändler soll eine Funktion zur Verfügung gestellt
werden, mit der er ein Modell aus seiner Angebotspalette entfernen
kann.</li>
<li><p>
Vertrag, Funktionskopf, Zweckbestimmung
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">entfernt eine Modell aus der Modellpalette</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">entferne-modell</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>modellpalette modell<span style="color: #909183;">]</span>
           <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? modellpalette<span style="color: #907373;">)</span> 
                   <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> modell<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
            <span style="color: #D0372D;">:post</span><span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
          ...<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div></li>
<li>Tests s. u. (aus "'Platzgründen"')</li>

</ul>

</section>
<section id="slide-orgbbd858d">
<h3 id="orgbbd858d">Funktionsschablone für <code>entferne-modell</code></h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">entfernt eine Modell aus der Modellpalette</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">entferne-modell</span>
       <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>modellpalette modell<span style="color: #909183;">]</span>
        <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? modellpalette<span style="color: #907373;">)</span> 
                <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> modell<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
         <span style="color: #D0372D;">:post</span><span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
         <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
          <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> modellpalette<span style="color: #709870;">)</span> ...
          <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> modellpalette<span style="color: #709870;">)</span> ... 
                ... <span style="color: #709870;">(</span>entferne-modell 
                      <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> modellpalette<span style="color: #907373;">)</span> modell<span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
            </pre>
</pre>
</div>

</section>
<section id="slide-org0832fee">
<h3 id="org0832fee">Funktionsrumpf für <code>entferne-modell</code></h3>
<ul>
<li>Folgende Fälle sind zu unterscheiden:
<ol>
<li>Wenn die Modellpalette die leere Liste ist, ist das Resultat
<code>empty</code>.</li>
<li>Wenn das zu entfernende Modell das erste in der Liste ist, so ist
das Resultat die Restliste.</li>
<li>Andernfalls besteht die Ergebnisliste aus dem ersten Modell und
der Restliste, aus der das zu entfernende Modell entfernt wurde.</li>

</ol></li>

</ul>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">entferne-modell</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>modellpalette modell<span style="color: #909183;">]</span>
        <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
          <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> modellpalette<span style="color: #709870;">)</span> <span style="color: #709870;">()</span>
          <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> modellpalette<span style="color: #907373;">)</span> modell<span style="color: #709870;">)</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">rest</span> modellpalette<span style="color: #709870;">)</span>
          <span style="color: #D0372D;">:else</span>
              <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> modellpalette<span style="color: #907373;">)</span>
                    <span style="color: #907373;">(</span>entferne-modell <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> modellpalette<span style="color: #6276BA;">)</span> 
                                     modell<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-org4a2a679">
<h3 id="org4a2a679">Funktion <code>entferne-modell</code> ohne Tests</h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">entfernt eine Modell aus der Modellpalette</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">entferne-modell</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>modellpalette modell<span style="color: #909183;">]</span>
        <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? modellpalette<span style="color: #907373;">)</span> 
                <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> modell<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
         <span style="color: #D0372D;">:post</span><span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
        <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
          <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> modellpalette<span style="color: #709870;">)</span> <span style="color: #709870;">()</span>
          <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> modellpalette<span style="color: #907373;">)</span> modell<span style="color: #709870;">)</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">rest</span> modellpalette<span style="color: #709870;">)</span>
          <span style="color: #D0372D;">:else</span>
              <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> modellpalette<span style="color: #907373;">)</span>
                    <span style="color: #907373;">(</span>entferne-modell <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> modellpalette<span style="color: #6276BA;">)</span> 
                                     modell<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-org04b48a7">
<h3 id="org04b48a7">Tests für <code>entferne-modell</code></h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-entferne-modell</span>
      <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>entferne-modell <span style="color: #907373;">()</span> '<span style="color: #D0372D;">BMW</span><span style="color: #709870;">)</span> <span style="color: #709870;">()</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
      <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>entferne-modell '<span style="color: #907373;">(</span><span style="color: #D0372D;">BMW</span><span style="color: #907373;">)</span> '<span style="color: #D0372D;">BMW</span><span style="color: #709870;">)</span> <span style="color: #709870;">()</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
      <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>entferne-modell '<span style="color: #907373;">(</span><span style="color: #D0372D;">BMW</span><span style="color: #907373;">)</span> '<span style="color: #D0372D;">OPEL</span><span style="color: #709870;">)</span> '<span style="color: #709870;">(</span><span style="color: #D0372D;">BMW</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
      <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>entferne-modell '<span style="color: #907373;">(</span><span style="color: #D0372D;">BMW</span> <span style="color: #D0372D;">OPEL</span> <span style="color: #D0372D;">FORD</span><span style="color: #907373;">)</span> '<span style="color: #D0372D;">TOYOTA</span><span style="color: #709870;">)</span> 
             '<span style="color: #709870;">(</span><span style="color: #D0372D;">BMW</span> <span style="color: #D0372D;">OPEL</span> <span style="color: #D0372D;">FORD</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
      <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>entferne-modell '<span style="color: #907373;">(</span><span style="color: #D0372D;">BMW</span> <span style="color: #D0372D;">OPEL</span> <span style="color: #D0372D;">FORD</span><span style="color: #907373;">)</span> '<span style="color: #D0372D;">OPEL</span><span style="color: #709870;">)</span> 
             '<span style="color: #709870;">(</span><span style="color: #D0372D;">BMW</span> <span style="color: #D0372D;">FORD</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
</section>
<section>
<section id="slide-orgc1160f5">
<h2 id="orgc1160f5">Entwurfsvorschrift V und Hilfsfunktionen</h2>
<div class="outline-text-2" id="text-orgc1160f5">
</div></section>
<section id="slide-orga8fcd8b">
<h3 id="orga8fcd8b">Top-down-Entwurf</h3>
<ul>
<li>Anhand eines weiteren Beispiels soll die Anwendung von
Entwurfsvorschrift V demonstriert werden.</li>
<li>Während des Entwurfsprozesses kann es sich als zweckmäßig erweisen,
für die Lösung bestimmter Teilprobleme eigene Funktionen
(Hilfsfunktionen) vorzusehen.</li>
<li>Dabei ist es hilfreich, diese Hilfsfunktionen als bereits existent
vorauszusetzen, um zunächst mit ihrer Hilfe die Lösung des
Hauptproblems formulieren zu können.</li>
<li><p>
Diese Vorgehensweise wird als
</p>
<ul>
<li><i>Top-down-Entwurf</i> oder auch</li>
<li><i>schrittweise Verfeinerung</i></li>

</ul>
<p>
bezeichnet.
</p></li>

</ul>

</section>
<section id="slide-orgbc8c5c9">
<h3 id="orgbc8c5c9">Literaturhinweise</h3>
<ul>
<li>Gelegentlich werden auch die Begriffe Wunschdenken oder Wunschliste
benutzt, z.B. in
<ol>
<li>M. Felleisen, R. Findler, M. Flatt, S. Krishnamurthi: How to
Design Programs. (<a class='org-ref-reference' href="#Htdp2003">Htdp2003</a>)</li>
<li>H. Klaeren, M. Sperber: Die Macht der Abstraktion.
(<a class='org-ref-reference' href="#KlaerenSperber2007">KlaerenSperber2007</a>)</li>

</ol></li>
<li>Das Prinzip der Entwurfsvorschriften stammt aus HtDP.</li>
<li><p>
Ein weiteres empfehlenswertes Buch:
</p>
<ol>
<li>Abelson, G. Sussman, J. Sussman: Structure and Interpretation of</li>

</ol>
<p>
Computer Programs. (<a class='org-ref-reference' href="#Sicp1999">Sicp1999</a>)
</p></li>

</ul>

</section>
<section id="slide-org6bee8ff">
<h3 id="org6bee8ff">Top-down-Entwurf &#x2013; Beispiel</h3>
<ul>
<li><p>
Die Funktion <code>(symbolsin x)</code> liefere, angewandt auf eine Liste von
Symbolen, eine Liste mit dem einmaligen Auftreten jedes dieser
Symbole:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">x</th>
<th scope="col" class="org-left">(symbolsin x)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(DIE KATZE UND DIE MAUS)</td>
<td class="org-left">(DIE KATZE UND MAUS)</td>
</tr>

<tr>
<td class="org-left">(A B A B A C A)</td>
<td class="org-left">(A B C)</td>
</tr>
</tbody>
</table>
<p>
Die Anwendung von Entwurfsvorschrift V (ohne Tests) liefert
zunächst:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">entfernt aus eine Liste von Symbolen jedes </span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">mehrfache Auftreten eines Symbols</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">symbolsin</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
             <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
              <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
             <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
                   <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> ... 
                         ... <span style="color: #709870;">(</span>symbolsin <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #907373;">)</span><span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org87dfb55">
<h3 id="org87dfb55">Top-down-Entwurf &#x2013; Beispiel <i>(2)</i></h3>
<ul>
<li>Das Resultat von <code>symbolsin</code> ist <code>()</code>, wenn das Argument die leere
Liste ist.</li>
<li>Für die Kombination des Ergebnisses aus dem ersten Listenelement und
der rekursiven Anwendung von <code>symbolsin</code> auf die Restliste sind zwei
Fälle zu unterscheiden:
<ol>
<li>Wenn das erste Element in <code>(symbolsin (rest lvs))</code> bereits
auftaucht, ist <code>(symbolsin (rest lvs))</code> schon das endgültige
Resultat.</li>
<li>Wenn es dort noch nicht vorhanden ist, muss das erste Element noch
hinzugefügt werden.</li>

</ol></li>
<li>Das Ergebnis von <code>symbolsin</code> kann als eine <i>Menge</i>, repräsentiert
durch eine Liste ohne Wiederholungen, betrachtet werden. Diese Idee
führt auf eine Hilfsfunktion <code>addtoset</code>, die ein Element einer Menge
hinzufügt, wenn es in ihr nicht bereits enthalten ist.</li>

</ul>

</section>
<section id="slide-orgab5f5aa">
<h3 id="orgab5f5aa">Top-down-Entwurf &#x2013; Beispiel <i>(3)</i></h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">fuegt einer Liste von Symbolen ein weiteres hinzu, </span>
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">falls es nicht bereits enthalten ist.</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">addtoset</span>
       <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs s<span style="color: #909183;">]</span>
          <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> s<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
           <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
          <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
             <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
             <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> ... 
                   ... <span style="color: #709870;">(</span>addtoset <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #907373;">)</span> s<span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

    <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-addtoset</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>addtoset '<span style="color: #907373;">(</span>a b c<span style="color: #907373;">)</span> 'b<span style="color: #709870;">)</span> '<span style="color: #709870;">(</span>a b c<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>addtoset '<span style="color: #907373;">(</span>a b c<span style="color: #907373;">)</span> 'd<span style="color: #709870;">)</span> '<span style="color: #709870;">(</span>d a b c<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
<p>
Mit dieser Funktion kann <code>symbolsin</code> vervollständigt werden.
</p>

</section>
<section id="slide-org876347a">
<h3 id="org876347a">Top-down-Entwurf &#x2013; Beispiel <i>(4)</i></h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">entfernt aus eine Liste von Symbolen jedes </span>
    <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">mehrfache Auftreten eines Symbols</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">symbolsin</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs<span style="color: #909183;">]</span>
        <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
         <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
        <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
          <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #709870;">()</span>
          <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span>addtoset
                   <span style="color: #907373;">(</span>symbolsin <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
                   <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

    <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-addtoset</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>symbolsin <span style="color: #907373;">()</span><span style="color: #709870;">)</span> <span style="color: #709870;">()</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>symbolsin '<span style="color: #907373;">(</span>a b c a d c<span style="color: #907373;">)</span><span style="color: #709870;">)</span> '<span style="color: #709870;">(</span>b a d c<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-org0fc0eae">
<h3 id="org0fc0eae">Top-down-Entwurf &#x2013; Beispiel <i>(5)</i></h3>
<ul>
<li>Für die Funktion <code>addtoset</code> stellen wir folgende Überlegungen an:
<ul>
<li>Falls die Liste (Menge) leer ist, kann das neue Element mit <code>cons</code>
hinzugefügt werden.</li>
<li>Wenn die Menge nicht leer ist, muss geprüft werden, ob das Element
bereits in der Liste enthalten ist.</li>

</ul></li>
<li><p>
Fügen wir der Wunschliste ein Prädikat <code>member?</code> hinzu.
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       ...
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">addtoset</span>
          <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs s<span style="color: #909183;">]</span>
           <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> s<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
            <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? <span style="color: #BA36A5;">%</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
           <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> s lvs<span style="color: #709870;">)</span>
              <span style="color: #D0372D;">:else</span>
                 <span style="color: #709870;">(</span><span style="color: #0000FF;">cond</span>
                    <span style="color: #907373;">(</span>member? lvs s<span style="color: #907373;">)</span> lvs<span style="color: #709870;">)</span>
                    <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> s lvs<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-orgb25725b">
<h3 id="orgb25725b">Top-down-Entwurf &#x2013; Beispiel <i>(6)</i></h3>
<p>
Die Schablone für die Funktion <code>member?</code>:
</p>

<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84; font-style: italic;">; prueft, ob ein Symbol in einer Liste enthalten ist.</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">member?</span>
       <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs s<span style="color: #909183;">]</span>
          <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> s<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
           <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #0000FF;">or</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">true?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">false?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
          <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
             <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> ...
             <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #709870;">)</span> ... 
                   ... <span style="color: #709870;">(</span>member? <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #907373;">)</span> s<span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

    <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-member</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>member? '<span style="color: #709870;">(</span>a b x<span style="color: #709870;">)</span> 'x<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">not</span> <span style="color: #709870;">(</span>member? '<span style="color: #907373;">(</span>a b x<span style="color: #907373;">)</span> 'y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-org457762d">
<h3 id="org457762d">Top-down-Entwurf &#x2013; Beispiel <i>(7)</i></h3>
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #8D8D84; font-style: italic;">; prueft, ob ein Symbol in einer Liste enthalten ist.</span>
    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">member?</span>
       <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lvs s<span style="color: #909183;">]</span>
          <span style="color: #909183;">{</span><span style="color: #D0372D;">:pre</span>  <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #006FE0;">every?</span> symbol? lvs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">symbol?</span> s<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
           <span style="color: #D0372D;">:post</span> <span style="color: #709870;">[</span><span style="color: #907373;">(</span><span style="color: #0000FF;">or</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">true?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">false?</span> <span style="color: #BA36A5;">%</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">}</span>
          <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
             <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lvs<span style="color: #709870;">)</span> <span style="color: #D0372D;">false</span>
             <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span><span style="color: #0000FF;">cond</span>
                      <span style="color: #907373;">(</span>= <span style="color: #6276BA;">(</span><span style="color: #006FE0;">first</span> lvs<span style="color: #6276BA;">)</span> s<span style="color: #907373;">)</span> <span style="color: #D0372D;">true</span>
                      <span style="color: #D0372D;">:else</span> <span style="color: #907373;">(</span>member? <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> lvs<span style="color: #6276BA;">)</span> s<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

    <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-member</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>member? '<span style="color: #709870;">(</span>a b x<span style="color: #709870;">)</span> 'x<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
       <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">not</span> <span style="color: #709870;">(</span>member? '<span style="color: #907373;">(</span>a b x<span style="color: #907373;">)</span> 'y<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

<p>
Das vollständige Programm <code>symbolsin</code> ist zu finden unter
symbolsin.clj in moodle. 
</p>



</section>
</section>
<section>
<section id="slide-orgbc158bf">
<h2 id="orgbc158bf">Rekursive Definition der natürlichen Zahlen</h2>
<div class="outline-text-2" id="text-orgbc158bf">
</div></section>
<section id="slide-org23a4e5b">
<h3 id="org23a4e5b">Mathematische Definition</h3>
<ul>
<li>Bisher wurden nur Listen als rekursive Datenstrukturen betrachtet.</li>
<li>Mathematisch können die natürlichen Zahlen folgendermaßen definiert
werden:
<ul>
<li>\(0\) ist eine natürliche Zahl.</li>
<li>Wenn \(n\) eine natürliche Zahl ist, dann ist auch \(succ(n)\) eine
natürliche Zahl.</li>

</ul></li>
<li>Wir definieren also
<ul>
<li>eine Konstante (\(0\)) und</li>
<li>eine Nachfolgeroperation (\(succ\)).</li>

</ul></li>
<li>Der Term \(succ(succ(succ(0)))\) entspricht dann der \(3\),
ohne dass wir die \(3\) als Konstante einführen müssen.</li>
<li>Durch die Prämisse im zweiten Teil der Definition ist diese rekursiv.</li>

</ul>
</section>
<section id="slide-org9b90705">
<h3 id="org9b90705">Definition in Clojure</h3>
<ul>
<li>In Clojure-Notation könnte die Definition lauten:
<ol>
<li><code>zero</code> ist eine natürliche Zahl.</li>
<li><code>(succ n)</code> ist eine natürliche Zahl, wenn <code>n</code> eine natürliche Zahl
ist.</li>

</ol></li>
<li>Um Verwechslungen mit den in Clojure eingebauten Zahlen zu vermeiden,
wird hier die Konstante Null durch <code>zero</code> anstelle von <code>0</code> dargestellt.</li>

</ul>

</section>
<section id="slide-org573db88">
<h3 id="org573db88">Clojure-Definitionen für zero und succ</h3>
<ul>
<li><p>
Konstanten sind u.a. dadurch gekennzeichnet, dass sie zu sich selbst
ausgewertet werden. Für die Konstante <code>zero</code> können wir das durch die
folgende Definition erreichen:
</p>

<div class="smaller">
<div class="org-src-container">

<pre  class="src src-clojure">    <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">zero</span> 'zero<span style="color: #707183;">)</span></pre>
</pre>
</div>

</div></li>

<li>Die Eingabe von <i>zero</i> in der Repl liefert dann <code>zero</code>.</li>

<li>Da wir in unserer abstrakten, rekursiven Definition für andere
natürliche Zahlen nur <code>succ</code>-Terme haben, soll auch ein
Clojure-Ausdruck <code>(succ (succ zero))</code> zu sich selbst ausgewertet
werden. Dies ist durch folgende Definition zu erreichen:</li>

</ul>

</section>
<section >
<div class="smaller">
<div class="org-src-container">

<pre  class="src src-clojure">        <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">succ</span>
           <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">list</span> 'succ n<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div>

<ul>
<li>Die Auswertung von<br />
  <code>(succ (succ (succ zero)))</code> <br />
liefert damit<br />
  <code>(succ (succ (succ zero)))</code>.</li>

</ul>

</section>
<section id="slide-org5ce36e9">
<h3 id="org5ce36e9">Der abstrakte Datentyp <b>Nat</b></h3>
<ul>
<li><p>
Mit den Definitionen für <code>zero</code> und <code>succ</code> haben wir quasi einen
neuen Datentyp geschaffen, den wir <b>Nat</b> nennen wollen.
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">zero</span> 'zero<span style="color: #707183;">)</span>

       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">succ: Nat -&gt; Nat</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">succ</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #006FE0;">list</span> 'succ n<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-succ</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>succ zero<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>succ zero<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>=  <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>
<li>Mithilfe dieses Datentyps können wir Funktionen definieren, die z.B.
natürliche Zahlen (d.h. Exemplare von <b>Nat</b>) als Ergebnis liefern.</li>

</ul>

</section>
<section id="slide-org75d8ae7">
<h3 id="org75d8ae7">Anwendung des Datentyps <b>Nat</b></h3>
<ul>
<li>Beispiel: Zählen der Elemente einer Liste.</li>

<li><p>
In Anlehnung an Entwurfsvorschrift V ergibt sich folgende
Schablone:
</p>

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">zaehlt die Anzahl der Elemente ihres Arguments</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">countElements: (list-of any) -&gt; Nat</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">countElements</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lst<span style="color: #909183;">]</span>
            <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
              <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lst<span style="color: #709870;">)</span> ... 
              <span style="color: #D0372D;">:else</span> ... <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> lst<span style="color: #709870;">)</span> ... 
                        <span style="color: #709870;">(</span>countelements <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> lst<span style="color: #907373;">)</span><span style="color: #709870;">)</span> ...<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-countElements</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span><span style="color: #808080;">countElements</span> <span style="color: #907373;">()</span> <span style="color: #709870;">)</span> zero<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span><span style="color: #808080;">countElements</span> '<span style="color: #907373;">(</span>19 27 36<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 
                <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>succ <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org9e1cec7">
<h3 id="org9e1cec7">Die Funktion <code>countElements</code></h3>
<ul>
<li><p>
Wenn die Liste nicht leer ist, ist das Resultat der Nachfolger der
Anwendung von <code>countElements</code> auf die Restliste.
</p>

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">zaehlt die Anzahl der Elemente ihres Arguments</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">countElements: (list-of any) -&gt; Nat</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">countElements</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>lst<span style="color: #909183;">]</span>
           <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span>
             <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> lst<span style="color: #709870;">)</span> zero
             <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span><span style="color: #808080;">countElements</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> lst<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span> 

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-countElements</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span><span style="color: #808080;">countElements</span> <span style="color: #907373;">()</span> <span style="color: #709870;">)</span> zero<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span><span style="color: #808080;">countElements</span> '<span style="color: #907373;">(</span>19 27 36<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 
                <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>succ <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org6c29914">
<h3 id="org6c29914">Weitere Operationen für <b>Nat</b></h3>
<ul>
<li>Die Operation \(succ\) ermöglicht es bisher nur (vorwärts) zu zählen.</li>
<li>Wir definieren zwei weitere Operationen zur
<ul>
<li>Ermittlung des Vorgängers einer natürlichen Zahl: \(pred\)</li>
<li>Addition von zwei natürlichen Zahlen: \(plus\)</li>

</ul></li>
<li>Die Definitionen nehmen wir dadurch vor, dass wir die
Wechselwirkungen der neuen Operationen mit den Basisoperationen \(0\)
und \(succ\) zunächst durch Gleichungen beschreiben.
<ul>
<li>Für \(pred\) gelte (mit \(n \in \textbf{Nat}\)):
\[\begin{aligned}
                      pred(succ(n)) & = & n  \\
                      pred(0) & & \mathrm{undefiniert}  
                  \end{aligned}\]</li>
<li>Für \(plus\) gelte (mit \(n, m \in \textbf{Nat}\)):
\[\begin{aligned}
                       plus(0, n) & = & n  \\
                       plus(succ(n), m) & = & succ(plus(n, m))  
                   \end{aligned}\]</li>

</ul></li>

</ul>

</section>
<section id="slide-orgbf5aaf5">
<h3 id="orgbf5aaf5">Prädikat <code>zero?</code></h3>
<ul>
<li>Beide Definitionen basieren auf einer Fallunterscheidung. Um sie in
entsprechende Clojure-Definitionen zu übertragen, ist es sinnvoll,
zunächst ein Prädikat <code>=zero?</code> zu definieren, das feststellt, ob sein
Argument <code>zero</code> ist.</li>
<li><p>
Dabei nutzen wir die Tatsache, dass  Exemplare von <b>Nat</b> entweder
<code>succ</code>-Terme (also Listen) oder <code>zero</code> sind.
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">prueft, ob ihr Argument zero ist.</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">=zero?: Nat -&gt; boolean</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">=zero?</span> 
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span>
           <span style="color: #909183;">(</span>= n zero<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-=zero?</span> 
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>=  <span style="color: #709870;">(</span>=zero? zero<span style="color: #709870;">)</span> <span style="color: #D0372D;">true</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>=  <span style="color: #709870;">(</span>=zero? <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #D0372D;">false</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
           </pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org7436ea5">
<h3 id="org7436ea5">Der abstrakte Datentyp <b>Nat</b>: <code>pred</code></h3>
<ul>
<li><p>
Definieren wir nun die Funktion <code>pred</code>:
</p>

<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">liefert den Term des Vorgaengers ihres Arguments</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">pred: Nat -&gt; Nat</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">pred</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span>
           <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span>
             <span style="color: #709870;">(</span>=zero? n<span style="color: #709870;">)</span> <span style="color: #709870;">(</span><span style="color: #0000FF;">throw</span> 
                         <span style="color: #907373;">(</span><span style="color: #6434A3;">Exception.</span> 
                          <span style="color: #008000;">"zero hat keinen Vorgaenger"</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
             <span style="color: #D0372D;">:else</span>
              <span style="color: #709870;">(</span><span style="color: #006FE0;">first</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">rest</span> n<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-pred</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>=  <span style="color: #709870;">(</span>pred <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span> zero<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>=  <span style="color: #709870;">(</span>pred <span style="color: #907373;">(</span>succ <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">(</span>succ zero<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>thrown? <span style="color: #6434A3;">Exception</span> <span style="color: #709870;">(</span>pred zero<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-orgef5008f">
<h3 id="orgef5008f">Der abstrakte Datentyp <b>Nat</b>: <code>plus</code></h3>
<ul>
<li><p>
Die rekursive Definition von \(plus\) übertragen wir in eine rekursive
Funktion <code>plus</code>:
</p>
<div class="org-src-container">

<pre  class="src src-clojure">       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">berechnet die Summe ihrer Argumente</span>
       <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">plus: Nat Nat -&gt; Nat</span>
       <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">plus</span>
         <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n m<span style="color: #909183;">]</span>
           <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
            <span style="color: #709870;">(</span>=zero? n<span style="color: #709870;">)</span> m
            <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>plus <span style="color: #6276BA;">(</span>pred n<span style="color: #6276BA;">)</span> m<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

       <span style="color: #707183;">(</span><span style="color: #006FE0;">deftest</span> <span style="color: #006699;">test-plus</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>plus zero <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span>  <span style="color: #709870;">(</span>succ zero<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>plus <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span> 
                     <span style="color: #909183;">(</span>succ <span style="color: #709870;">(</span>succ zero<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span>
         <span style="color: #7388D6;">(</span><span style="color: #006FE0;">is</span> <span style="color: #909183;">(</span>= <span style="color: #709870;">(</span>plus <span style="color: #907373;">(</span>succ zero<span style="color: #907373;">)</span>
                      <span style="color: #907373;">(</span>plus <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span> <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span>
                <span style="color: #709870;">(</span>succ <span style="color: #907373;">(</span>succ <span style="color: #6276BA;">(</span>succ zero<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>

</section>
<section id="slide-org947b5bf">
<h3 id="org947b5bf">Der Datentyp <b>Nat</b>: Zusammenfassung</h3>
<p>
Was haben wir gelernt?
</p>

<ul>
<li>Rekursive Datenstrukturen können beliebig wachsen.</li>
<li>Der Datentyp <b>Nat</b> ermöglicht das Rechnen mit beliebig großen
natürlichen Zahlen.</li>
<li>Das kann man in Clojure zwar einfacher haben, in mancher populärer
Programmiersprache aber nicht.</li>
<li>Datentypen kann man bauen.</li>
<li>Mit Exemplaren des abstrakten Datentyps <b>Nat</b> kann man rechnen, ohne
sich auf eine herkömmliche (maschinenabhängige) Repräsentation von
Zahlen festlegen zu müssen.</li>
<li><b>Ausblick:</b> Abstrakte Datentypen haben eine besondere Bedeutung für
die formale Spezifikation der Semantik von Software erlangt.</li>

</ul>


</section>
</section>
<section>
<section id="slide-org0ddea23">
<h2 id="org0ddea23">Zusammenfassung</h2>
<div class="outline-text-2" id="text-org0ddea23">
</div></section>
<section id="slide-org5aebe9d">
<h3 id="org5aebe9d">Entwurfsvorschrift (Bedeutung)</h3>
<ul>
<li>kein Allheilmittel!</li>
<li>stellt eine Handlungsanleitung dar.</li>
<li>Phase 3 stellt hohe Anforderungen:
<ul>
<li>Verstehen der Problembeschreibung,</li>
<li>Vermögen, mathematische Zusammenhänge zu erkennen,</li>
<li>Einarbeitung in fremde Begriffswelt,</li>
<li>Entwicklung eigener Fachsprachen.</li>
<li>Informatik = Sprachingenieurwesen?</li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org56db449">
<h2 id="org56db449"><h2>Literaturverzeichnis</h2>
<ul class='org-ref-bib'><li><a id="Htdp2003">[Htdp2003] Matthias Felleisen, Robert Bruce Findler, Matthew Flatt & Shriram Krishnamurthi, How to Design Programs, The MIT Press (2003).</a></li>
<li><a id="KlaerenSperber2007">[KlaerenSperber2007] Herbert Klaeren & Michael Sperber, Die Macht der Abstraktion, B. G. Teubner (2007).</a></li>
<li><a id="Sicp1999">[Sicp1999] Harold Abelson, Gerald Jay Sussman & Julie Sussman, Structure and interpretation of computer programs, The MIT Press (1999).</a></li>
</ul></h2>
</section>
</section>
</div>
</div>
<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,
margin: 0.05,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
,dependencies: [ { src: 'plugin/menu/menu.js', async: true }, { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true } ]});
</script>
</body>
</html>
